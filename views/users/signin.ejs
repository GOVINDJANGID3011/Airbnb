<%- layout('./layouts/boilerplate.ejs') %>

<style>
    /* ================= HELPER TEXT ================= */
    .helper-text {
        font-size: 0.85rem;
        color: #6c757d;
    }

    .helper-text ul {
        margin: 5px 0 0 18px;
        padding: 0;
    }

    /* ================= LOADING OVERLAY ================= */
    #loadingOverlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(255, 255, 255, 0.9);
        z-index: 9999;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }
</style>

<body>

    <!-- ================= LOADING OVERLAY ================= -->
    <div id="loadingOverlay">
        <div class="spinner-border text-danger" role="status"></div>
        <p class="mt-3 fw-semibold">Sending OTP, please wait...</p>
    </div>

    <!-- ================= SIGNUP FORM ================= -->
    <div class="row">
        <div class="col-6 offset-3">
            <br>
            <h1>Sign up in Wanderlust</h1>

            <form method="POST" action="/signin" novalidate class="needs-validation" id="signupForm">

                <!-- Username -->
                <label for="username" class="form-label">Username</label>
                <input
                    name="username"
                    type="text"
                    class="form-control"
                    minlength="3"
                    maxlength="20"
                    required
                >
                <small class="helper-text">
                    Username must be between <b>3–20 characters</b>
                </small>
                <div class="invalid-feedback">
                    Username is required
                </div>

                <br>

                <!-- Email -->
                <label for="email" class="form-label">Email</label>
                <input
                    type="email"
                    name="email"
                    class="form-control"
                    required
                >
                <small class="helper-text">
                    Enter a valid email address
                </small>
                <div class="invalid-feedback">
                    Email is required
                </div>

                <br>

                <!-- Password -->
                <label for="password" class="form-label">Password</label>
                <input
                    name="password"
                    id="password"
                    type="password"
                    class="form-control"
                    minlength="6"
                    required
                    pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$"
                >

                <small class="helper-text">
                    Password must contain:
                    <ul>
                        <li>At least 1 uppercase letter</li>
                        <li>At least 1 lowercase letter</li>
                        <li>At least 1 number</li>
                        <li>At least 1 special character</li>
                    </ul>
                </small>

                <div class="invalid-feedback">
                    Password is required
                </div>

                <br>

                <button class="btn btn-success">Sign Up</button>

            </form>
        </div>
    </div>
</body>





<!-- ================= JAVASCRIPT ================= -->
<script>

    /* ---------- Show loading overlay on submit ---------- */
    const signupForm = document.getElementById('signupForm');
    const overlay = document.getElementById('loadingOverlay');

    signupForm.addEventListener('submit', () => {
        // If form is INVALID, do NOT show overlay
        if (!signupForm.checkValidity()) {
            return;
        }
        // Form is valid → show overlay
        overlay.style.display = 'flex';
    });

    
</script>
